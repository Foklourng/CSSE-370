<!DOCTYPE html>
<html lang="en">
<head>
<title>CSSE-370</title>
<h1>Phase6/Foklourng Fan</h1>
<meta charset ="UTF-8"/>
<meta name = "viewport" content = "width=device-width, initial-scale=1.0"/>
<meta http-equiv = "X-UA-Compatible" content = "ie=edge"/>
</head>
<body>
	<input class = "but" type="text" id="T0" placeholder="Enter Movie's Name"><br>
	<button class = "but" id ="search" onclick="myFunction()"style="display:block;"> Search Movie's Plot <span id="weat"></span></button>
	<button class = "but" id ="reload" onclick="window.location.reload();"style="display:none;"> Back </button>
	<img class = "but" id= "pic" src="" alt="Poster" height="420" width="320" style="display:none;"/>
	<p class = "but" id ='plot'></p>
<script>

function myFunction(){
	
	var input = document.getElementById("T0").value;
	var movie = input.replace(/ /g,"+");
	const api_url = "http://www.omdbapi.com/?i=tt3896198&apikey=b892701d&s="+movie;
	document.getElementById('search').style.display = "none";
	console.log(movie);
	printInfo(api_url);
	
}

async function printInfo(a){
	document.getElementById('reload').style.display = "block";
	const responseData = await fetch(a);

	const data1 = await responseData.json();
	console.log(data1);
	
		try{
	
		var btn1 = document.createElement("p");
			btn1.innerHTML = "-"+data1.Search[0].Title + " Year: "+ data1.Search[0].Year;
		}catch(e){
		console.log("Error found");
		document.getElementById("plot").innerHTML 	= "Movie Not Found";
		}
		document.body.appendChild(btn1);
		btn1.style.color = "#D93600";
		btn1.onclick = function(){
		  
		btn1.innerHTML = "";
		btn2.innerHTML = "";
		btn3.innerHTML = "";
		btn4.innerHTML = "";
		 var img1 = document.getElementById('pic');
		img1.src = data1.Search[0].Poster;
		img1.style.display = "block";
		moviePlot(data1.Search[0].imdbID);
		}
		var btn2 = document.createElement("p");
			btn2.innerHTML = "-"+data1.Search[1].Title + " Year: "+ data1.Search[1].Year;
  
			document.body.appendChild(btn2);
			btn2.style.color = "#D93600";
			
			btn2.onclick = function(){
			document.getElementById('reload').style.display = "block";
			btn1.innerHTML = "";
			btn2.innerHTML = "";
			btn3.innerHTML = "";
			btn4.innerHTML = "";
			
			var img1 = document.getElementById('pic');
			img1.src = data1.Search[1].Poster;
			img1.style.display = "block";
			moviePlot(data1.Search[1].imdbID);
		}
		var btn3 = document.createElement("p");
			btn3.innerHTML = "-"+data1.Search[2].Title + " Year: "+ data1.Search[2].Year;
  
			document.body.appendChild(btn3);
			btn3.style.color = "#D93600";
			btn3.onclick = function(){
			document.getElementById('reload').style.display = "block";
			btn1.innerHTML = "";
			btn2.innerHTML = "";
			btn3.innerHTML = "";
			btn4.innerHTML = "";
			
			var img1 = document.getElementById('pic');
			img1.src = data1.Search[2].Poster;
			img1.style.display = "block";
			moviePlot(data1.Search[2].imdbID);
		}
		var btn4 = document.createElement("p");
			btn4.innerHTML = "-"+data1.Search[3].Title + " Year: "+ data1.Search[3].Year;
  
			document.body.appendChild(btn4);
			btn4.style.color = "#D93600";
			btn4.onclick = function(){
			document.getElementById('reload').style.display = "block";
			btn1.innerHTML = "";
			btn2.innerHTML = "";
			btn3.innerHTML = "";
			btn4.innerHTML = "";
		  
			var img1 = document.getElementById('pic');
			img1.src = data1.Search[3].Poster;
			img1.style.display = "block";
			moviePlot(data1.Search[3].imdbID);
		}
}
async function moviePlot(id){
	const api_plot = "http://www.omdbapi.com/?apikey=b892701d&i="+id;
	
	const plot = await fetch(api_plot);

	const data_plot = await plot.json();
	
	document.getElementById("plot").innerHTML 	= data_plot.Plot;
}


</script>
<style>
.but{
	margin-top: 10px;
	font-size: 17px;
}

</style>
</body>
</html>